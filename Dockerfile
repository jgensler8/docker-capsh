FROM ubuntu:trusty

RUN apt-get update
RUN apt-get install -y git make gcc
RUN rm `which capsh`

#      ___           ___           ___         ___           ___
#     /  /\         /  /\         /  /\       /  /\         /__/\
#    /  /:/        /  /::\       /  /::\     /  /:/_        \  \:\
#   /  /:/        /  /:/\:\     /  /:/\:\   /  /:/ /\        \__\:\
#  /  /:/  ___   /  /:/~/::\   /  /:/~/:/  /  /:/ /::\   ___ /  /::\
# /__/:/  /  /\ /__/:/ /:/\:\ /__/:/ /:/  /__/:/ /:/\:\ /__/\  /:/\:\
# \  \:\ /  /:/ \  \:\/:/__\/ \  \:\/:/   \  \:\/:/~/:/ \  \:\/:/__\/
#  \  \:\  /:/   \  \::/       \  \::/     \  \::/ /:/   \  \::/
#   \  \:\/:/     \  \:\        \  \:\      \__\/ /:/     \  \:\
#    \  \::/       \  \:\        \  \:\       /__/:/       \  \:\
#     \__\/         \__\/         \__\/       \__\/         \__\/
RUN git clone git://git.kernel.org/pub/scm/linux/kernel/git/morgan/libcap.git /opt/libcap
WORKDIR /opt/libcap
RUN make install

#      ___           ___           ___           ___           ___                       ___
#     /  /\         /__/|         /  /\         /__/\         /  /\                     /  /\
#    /  /:/_       |  |:|        /  /::\       |  |::\       /  /::\                   /  /:/_
#   /  /:/ /\      |  |:|       /  /:/\:\      |  |:|:\     /  /:/\:\  ___     ___    /  /:/ /\
#  /  /:/ /:/_   __|__|:|      /  /:/~/::\   __|__|:|\:\   /  /:/~/:/ /__/\   /  /\  /  /:/ /:/_
# /__/:/ /:/ /\ /__/::::\____ /__/:/ /:/\:\ /__/::::| \:\ /__/:/ /:/  \  \:\ /  /:/ /__/:/ /:/ /\
# \  \:\/:/ /:/    ~\~~\::::/ \  \:\/:/__\/ \  \:\~~\__\/ \  \:\/:/    \  \:\  /:/  \  \:\/:/ /:/
#  \  \::/ /:/      |~~|:|~~   \  \::/       \  \:\        \  \::/      \  \:\/:/    \  \::/ /:/
#   \  \:\/:/       |  |:|      \  \:\        \  \:\        \  \:\       \  \::/      \  \:\/:/
#    \  \::/        |  |:|       \  \:\        \  \:\        \  \:\       \__\/        \  \::/
#     \__\/         |__|/         \__\/         \__\/         \__\/                     \__\/
COPY ./examples /opt/examples
# TODO
# RUN make -D examples
